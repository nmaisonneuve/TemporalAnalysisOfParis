<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Temporal Analysis of the heart of Paris</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="nm">

  <!-- Le styles -->

  <link href="http://getbootstrap.com/dist/css/bootstrap.css" rel="stylesheet">
  <!-- Custom styles for this template -->
  <link href="http://getbootstrap.com/examples/offcanvas/offcanvas.css" rel="stylesheet">
  <link href='loading.css'  rel="stylesheet">

  <script src="jquery.min.js"></script>
  <script src="underscore-min.js"></script>
  <script src='pace.min.js'></script>
  <script src="cooccurences.js"></script>
  <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
  <!--[if lt IE 9]>
  <script src="assets/js/html5shiv.js"></script>
  <![endif]-->

</head>
<body>
  <h2>
    Co-occurence of candidate patches for
    <span id='experiment_id'></span>
  </h2>

  <ul>
    <li>
      List of experiments :
      <a href='?experiment=exp_one_vs_all_period1'>period 1</a>
      <a href='?experiment=exp_one_vs_all_period3'>period 3</a>
      <a href='?experiment=exp_one_vs_all_period5'>period 5</a>
      <a href='?experiment=exp_one_vs_all_period7'>period 7</a>
    </li>

    <li> <b>Description:</b>
      Adjacency list representation of a co-occurrence graph:
      <ul>
        <li>Nodes: the top K discriminative clusters / detectors found</li>
        <li>Edge: a measure of co-occurence between 2 clusters</li>
      </ul>

    </li>
    <li> <b>Co-occurrence measure   :</b>

      <ul>
        <li>
          metrics:
          <a href='http://en.wikipedia.org/wiki/Jaccard_index'>Jaccard Index</a>
          i.e.  How many shared context (shared images) do the members (detections) of clusters A and B have in common / the union of all the images in which members of each cluster appeared. TODO:
          <a href='http://en.wikipedia.org/wiki/Pointwise_mutual_information'>PMI as metrics</a>
          + (*) co-occurency analysis at the spatial level ie. overlapping patches
        </li>
        <li>
          <b>Noise threshold</b>
          : a co-occurence/link is considered as noise and removed if the co-occurrence measure is lower than:
          <b><span id='threshold'>0.2</span></b> 
        </li>
      </ul>
    </li>
    <li>
      <b>Visualisation</b>
      <ul>
        <li>Ranking: Node/Clusters sorted by degree centrality</li>
        <li>
          for each cluster, we only display the top most 30 co-occurrent clusters
        </li>
      </ul>
    </li>
    <li>(be carefull json data file > 5Mo)</li>
  </ul>

  <div >
    <table id='clusters'></table>
  </div>

  <!-- HTML template -->
  <script  type="text/template"  id='list_cluster_template'>
      <tr ><td width='100' style='padding-top:10px'> 
            <b style='font-size:13px'>Cluster <%= cluster.id %> (centrality: 
              <%= cluster.nn.length %>)</b> 
            <br/><img src='../results/<%= exp %>/nn/images/<%= cluster.centroid.img_path[0] %>/cluster_<%= cluster.centroid.img_path[1] %>_patch_<%= cluster.centroid.img_path[2] %>.jpg' width='90' height='90' /></td>
       
          <td>
         <% 
          //var i =1 and not 0 to remove the centroid
          nb_displayed_members = Math.min(30, cluster.nn.length);
         for (var i = 1; i< nb_displayed_members ; i++) {
            image = cluster.nn[i];
            //if (image.score < 0.2)
            //  continue;

         %><img src='../results/<%= exp %>/nn/images/<%= image.img_path[0] %>/cluster_<%= image.img_path[1] %>_patch_<%= image.img_path[2] %>.jpg' width='60' height='60' style='padding:1px' title='Cluster id: <%= image.id %> score:<%= image.score %>'/><% } %></td>
       
    </script>
</body>
</html>